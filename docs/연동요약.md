
# í”„ë¡œì íŠ¸ ë°±ì—”ë“œ/í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì„± ë° ì˜¤ë¥˜ í•´ê²° ê³¼ì • ë¬¸ì„œ

ì´ ë¬¸ì„œëŠ” React + Spring Boot + Oracle DBë¥¼ ì´ìš©í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì—°ê²° ë° ë¬¸ì œ í•´ê²° ê³¼ì •ì„ ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œë¡œ ë‚˜ëˆ„ì–´ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.

---

## ğŸ”§ ë°±ì—”ë“œ (Spring Boot)

### âœ… í•µì‹¬ êµ¬ì„± íŒŒì¼

#### 1. `application.properties`

```properties
spring.application.name=baseball_pj
spring.web.resources.static-locations=file:./dist/
spring.datasource.url=jdbc:oracle:thin:@210.119.14.76:1521:XE
spring.datasource.username=baseball
spring.datasource.password=bb1234
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver
spring.datasource.hikari.connection-init-sql=ALTER SESSION SET TIME_ZONE='+09:00'
spring.jpa.database-platform=org.hibernate.dialect.OracleDialect
server.servlet.encoding.charset=UTF-8
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
server.port=18080
```

- `210.119.14.76`ì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ì™¸ë¶€ DB ì ‘ì†ê°€ëŠ¥
- Hibernateì™€ Oracle ì—°ë™ì— í•„ìš”í•œ ì„¤ì • í¬í•¨

#### 2. `UserEntity.java`

```java
@Entity
// USERS í…Œì´ë¸”ê³¼ ë§¤í•‘í•©ë‹ˆë‹¤.
@Table(name = "USERS")
// Lombokì„ ì‚¬ìš©í•˜ì—¬ Getter, Setter, ìƒì„±ì, ë¹Œë” ë“±ì„ ìë™ ìƒì„±í•©ë‹ˆë‹¤.
@Getter @Setter @NoArgsConstructor @AllArgsConstructor @Builder
public class UserEntity {

    // ì‚¬ìš©ì ê³ ìœ  ID (PK)
    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "user_seq_gen")
    @SequenceGenerator(name = "user_seq_gen", sequenceName = "SEQ_USERS", allocationSize = 1)
    @Column(name = "USER_ID")
    private Long id;

    // ì‚¬ìš©ì ì´ë©”ì¼ (ì¤‘ë³µ ë¶ˆê°€, í•„ìˆ˜)
    @Column(name = "USER_EMAIL", nullable = false, unique = true)
    private String email;

    // ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ (í•„ìˆ˜)
    @Column(name = "USER_PASSWORD", nullable = false)
    private String password;

    // ì‚¬ìš©ì ë‹‰ë„¤ì„ (í•„ìˆ˜)
    @Column(name = "USER_NICKNAME", nullable = false)
    private String nickname;

    // ì„ í˜¸ íŒ€ ID (í•„ìˆ˜)
    @Column(name = "TEAM_ID", nullable = false)
    private Long favoriteTeamId;

    // ì‚¬ìš©ì ê¶Œí•œ (ê¸°ë³¸ê°’: user)
    @Builder.Default
    @Column(name = "USER_ROLE", nullable = false)
    private String role = "user";

    // ê³„ì • ìƒì„±ì¼ì‹œ (ê¸°ë³¸ê°’: í˜„ì¬ ì‹œê°„)
    @Builder.Default
    @Column(name = "USER_CREATED_AT")
    private LocalDateTime createdAt = LocalDateTime.now();
}

```

#### 3. `UserRepository.java`

```java
public interface UserRepository extends JpaRepository<UserEntity, Long> {
    // ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
    Optional<UserEntity> findByEmail(String email);
    // ë‹‰ë„¤ì„ìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
    Optional<UserEntity> findByNickname(String nickname);
}
```

#### 4. `UserController.java`

```java
// REST API ì»¨íŠ¸ë¡¤ëŸ¬ì„ì„ ëª…ì‹œí•©ë‹ˆë‹¤.
@RestController
// Lombokì„ ì‚¬ìš©í•˜ì—¬ ìƒì„±ì ì£¼ì…ì„ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.
@RequiredArgsConstructor
// ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ê¸°ë³¸ URL ê²½ë¡œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
@RequestMapping("/api/users")
public class UserController {

    // UserRepositoryë¥¼ ì£¼ì…ë°›ì•„ ì‚¬ìš©ì ê´€ë ¨ DB ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
    private final UserRepository userRepository;

    // íšŒì›ê°€ì… API
    // ì „ë‹¬ë°›ì€ UserEntity ê°ì²´ë¡œ íšŒì›ê°€ì…ì„ ì‹œë„í•©ë‹ˆë‹¤.
    @PostMapping("/join")
    public String join(@RequestBody UserEntity user) {
        // ì´ë©”ì¼ ì¤‘ë³µ ì²´í¬
        if (userRepository.findByEmail(user.getEmail()).isPresent()) {
            return "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤.";
        }

        // ë‹‰ë„¤ì„ ì¤‘ë³µ ì²´í¬
        if (userRepository.findByNickname(user.getNickname()).isPresent()) {
            return "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.";
        }

        // ì‚¬ìš©ì ì •ë³´ ì €ì¥
        userRepository.save(user);
        return "íšŒì›ê°€ì… ì„±ê³µ";
    }

    // ë‹‰ë„¤ì„ ì¤‘ë³µ í™•ì¸ API
    // ë‹‰ë„¤ì„ì´ ì‚¬ìš© ê°€ëŠ¥í•œì§€ ì—¬ë¶€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    @GetMapping("/check-nickname")
    public boolean checkNickname(@RequestParam String nickname) {
        return userRepository.findByNickname(nickname).isEmpty();
    }
}

```

#### 5. SQL í…ŒìŠ¤íŠ¸

ê°œì¸ ë¡œì»¬ DBì—ì„œ ì—°ë™ í™•ì¸ í›„ ê³µìš© DBì— ì—°ë™í•¨ (ì •ìƒ ì‘ë™ í™•ì¸ ì™„ë£Œ)

---

### ğŸ ë°œìƒí–ˆë˜ ë¬¸ì œ ë° í•´ê²°

| ë¬¸ì œ | ì›ì¸ | í•´ê²° |

|------|------|------|
| `org.hibernate.dialect.Oracle10gDialect not found` | Hibernate 6ë¶€í„°ëŠ” Oracle10gDialect ì œê±°ë¨ | `org.hibernate.dialect.OracleDialect` ë¡œ ë³€ê²½ |
| 500 Internal Server Error | Entity ë˜ëŠ” DB ì„¤ì • ì˜¤ë¥˜ | `@Entity`, `@Table`, `@Id` ëª…ì‹œ í™•ì¸ |

---

## ğŸŒ í”„ë¡ íŠ¸ì—”ë“œ (React + Vite)

### âœ… ì£¼ìš” íŒŒì¼ ë° ì½”ë“œ

#### 1. `vite.config.js`

```js
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:18080',  // Spring Bootê°€ ì‹¤í–‰ë˜ëŠ” í¬íŠ¸
        changeOrigin: true
      }
    }
  }
})

```

- ë„ì»¤ ë‚´ì—ì„œ Spring Bootì— ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ proxy ì„¤ì •

#### 2. `App.jsx`

```jsx
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import Signup from './pages/Signup'; // íšŒì›ê°€ì… ì»´í¬ë„ŒíŠ¸
import Home from './pages/Home';     // ê¸°ì¡´ í…ŒìŠ¤íŠ¸ í™”ë©´

function App() {
  return (
    <Router>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/signup" element={<Signup />} />
      </Routes>
    </Router>
  );
}

export default App;

```

#### 3. `Signup.jsx`

```jsx
import { useState } from 'react';
import axios from 'axios';

const kboTeams = [
  { id: 1, name: 'ë‘ì‚° ë² ì–´ìŠ¤' },
  { id: 2, name: 'ì‚¼ì„± ë¼ì´ì˜¨ì¦ˆ' },
  { id: 3, name: 'SSG ëœë”ìŠ¤' },
  { id: 4, name: 'LG íŠ¸ìœˆìŠ¤' },
  { id: 5, name: 'NC ë‹¤ì´ë…¸ìŠ¤' },
  { id: 6, name: 'í‚¤ì›€ íˆì–´ë¡œì¦ˆ' },
  { id: 7, name: 'í•œí™” ì´ê¸€ìŠ¤' },
  { id: 8, name: 'KIA íƒ€ì´ê±°ì¦ˆ' },
  { id: 9, name: 'ë¡¯ë° ìì´ì–¸ì¸ ' },
  { id: 10, name: 'KT ìœ„ì¦ˆ' },
];

const Signup = () => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [nickname, setNickname] = useState('');
  const [favoriteTeamId, setFavoriteTeamId] = useState('');

  const handleSubmit = async (e) => {
    e.preventDefault();

    try {
      const user = {
        email,
        password,
        nickname,
        favoriteTeamId: Number(favoriteTeamId),
        role: "user" // ì„œë²„ì—ì„œ ê¸°ë³¸ê°’ ìˆì§€ë§Œ ëª…ì‹œí•´ë„ ì¢‹ìŒ
      };

      const res = await axios.post('/api/users/join', user);

      alert('âœ… íšŒì›ê°€ì… ì„±ê³µ!');
      console.log(res.data);
    } catch (err) {
      console.error('âŒ íšŒì›ê°€ì… ì‹¤íŒ¨:', err.response);
      alert('íšŒì›ê°€ì… ì‹¤íŒ¨: ' + (err.response?.data || err.message));
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <input
        type="email"
        placeholder="ì´ë©”ì¼"
        value={email}
        onChange={(e) => setEmail(e.target.value)}
        required
      /><br />

      <input
        type="password"
        placeholder="ë¹„ë°€ë²ˆí˜¸"
        value={password}
        onChange={(e) => setPassword(e.target.value)}
        required
      /><br />

      <input
        type="text"
        placeholder="ë‹‰ë„¤ì„"
        value={nickname}
        onChange={(e) => setNickname(e.target.value)}
        required
      /><br />

      <select
        value={favoriteTeamId}
        onChange={(e) => setFavoriteTeamId(e.target.value)}
        required
      >
        <option value="">ì‘ì›íŒ€ ì„ íƒ</option>
        {kboTeams.map((team) => (
          <option key={team.id} value={team.id}>
            {team.name}
          </option>
        ))}
      </select><br />

      <button type="submit">ê°€ì…í•˜ê¸°</button>
    </form>
  );
};

export default Signup;

```

---

## ğŸ“¦ ë¹Œë“œ ë° ì‹¤í–‰

### ğŸ§± Spring Boot

```bash
java ì‹¤í–‰
```

### ğŸ§ª React

```bash
npm install
npm run dev
```

---

## ğŸ“Œ ìš”ì•½

- Reactì—ì„œ Spring Boot API í˜¸ì¶œì„ ìœ„í•´ `/api` í”„ë¡ì‹œ ì„¤ì •ì„ ì‚¬ìš©
- Spring BootëŠ” Oracle XEì™€ ì—°ë™ë˜ì–´ ìˆìœ¼ë©°, `host.docker.internal`ì„ í†µí•´ ì™¸ë¶€ ë„ì»¤ í™˜ê²½ì—ì„œ ì—°ê²°
- Axiosë¡œ í˜¸ì¶œí•œ APIëŠ” Oracle DBì—ì„œ ì§ì ‘ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜´
- CORS, Hibernate ì„¤ì • ì´ìŠˆ í•´ê²°ì´ ì£¼ìš” í¬ì¸íŠ¸ì˜€ìŒ

---

ì•ìœ¼ë¡œëŠ” ì´ êµ¬ì¡°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¡œê·¸ì¸, ì»¤ë®¤ë‹ˆí‹°, AIì˜ˆì¸¡ API ë“±ì„ í™•ì¥í•˜ë©´ ë©ë‹ˆë‹¤.
